---
export interface Props {
  url: string;
}

const { url } = Astro.props;

const getRepoInfo = (githubUrl: string) => {
  try {
    const urlParts = new URL(githubUrl).pathname.split('/');
    const owner = urlParts[1];
    const repo = urlParts[2];
    return { owner, repo };
  } catch (e) {
    return { owner: 'unknown', repo: 'unknown' };
  }
};

const { owner, repo } = getRepoInfo(url);
---

<div class="my-8 not-prose w-full flex justify-center">
  <a href={url} target="_blank" rel="noopener noreferrer"
     class="block p-4 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 ease-in-out"
     style="max-width: 600px; width: 100%; background-color: var(--aw-card-bg); color: var(--aw-text-color);">
    <div class="flex items-center">
      <svg class="w-6 h-6 mr-3 text-gray-800 dark:text-gray-200" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.47.087.686-.233.686-.522 0-.257-.01-1.04-.015-1.986-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.004.07 1.532 1.03 1.532 1.03.892 1.529 2.341 1.089 2.91.833.091-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.953 0-1.096.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.025A9.42 9.42 0 0112 6.865a9.42 9.42 0 012.072-.218c1.909-1.295 2.747-1.025 2.747-1.025.546 1.379.202 2.398.099 2.65.64.7 1.028 1.592 1.028 2.688 0 3.848-2.338 4.69-4.562 4.945.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .289.216.61.691.522C21.13 20.2 24 16.443 24 12.017 24 6.484 19.522 2 14 2h-2z" clip-rule="evenodd" />
      </svg>
      <div>
        <div class="font-semibold text-lg leading-tight">
          {owner}/{repo}
        </div>
        <div class="text-sm text-gray-600 dark:text-gray-400">
          View on GitHub
        </div>
      </div>
    </div>
  </a>
</div>